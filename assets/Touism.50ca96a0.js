var T=Object.defineProperty,v=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var p=(e,t,a)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,h=(e,t)=>{for(var a in t||(t={}))D.call(t,a)&&p(e,a,t[a]);if(g)for(var a of g(t))L.call(t,a)&&p(e,a,t[a]);return e},d=(e,t)=>v(e,$(t));import{e as B,m as b,k as l,f as s,l as m,g as n,t as u,h as o,F,r as w,n as c,o as r,u as N}from"./vendor.73b88934.js";import{_ as A,c as H,a as y,G as j}from"./index.7a825d07.js";import{A as G}from"./ArrowLeft.48bfa53b.js";import{P as I,F as V,C as S}from"./Cards.87155347.js";import"./illustration.ca06ed63.js";var z="/taiwan_tourist/assets/loading.e005c1d4.svg";const E=B({data(){return{ArrowLeft:G,Loading:z,currentCity:null,currentType:null,mainData:[],dataCount:0,limit:9,currentPage:1,processData:[],apiLoad:!0}},mounted(){this.checkParams(this.$route.params)},watch:{$route(e,t){e.params&&e.params.city!=t.params.city&&this.checkParams(e.params)},searchtext(){this.fetchData()}},components:{PageHeader:I,Footer:V,Cards:S},computed:d(h({},b(["searchtext","navToggle","fullPage"])),{pageCount(){return parseInt(this.dataCount/this.limit)+(this.dataCount%this.limit>0?1:0)},cityTitle(){return this.currentCity?H[this.currentCity]:""},apiTypeTitle(){return this.currentType?y.find(t=>t.index===this.currentType).title:null}}),methods:{checkParams(e){e?(this.currentCity=e.city,this.currentType=e.type,this.fetchData()):this.$router.push("/")},fetchData(){if(this.currentType){const e=y.find(t=>t.index===this.currentType);if(e){this.mainData=[],this.dataCount=0;const t={};this.searchtext&&(t.$filter=`contains(Name,'${this.searchtext}')`),this.apiLoad=!0,j(`${e.url}${this.currentCity?"/"+this.currentCity:""}`,t).then(a=>{this.mainData=a,this.dataCount=a.length,this.setPageData()}).catch(a=>{console.log(a)})}}else this.$router.push("/")},setPageData(){const e=(this.currentPage-1)*this.limit;this.processData=this.mainData.slice(e,e+this.limit),this.apiLoad=!1},changePage(e){this.currentPage=e,this.setPageData()},goBack(){this.$router.push({name:"Guide",params:{city:this.currentCity}})}}}),q={class:"iconText"},J=["src"],K={class:"mainData_container"},M={key:0,class:"loadingBox"},Q=["src"],R={key:1,class:"card_container touism"},U={class:"pagination"},W={key:1},X={key:5},Y={key:2};function Z(e,t,a,O,_,x){const P=l("PageHeader"),C=l("Cards"),f=l("Footer");return r(),s("main",{class:c(["main_container",{fullPage:e.fullPage}])},[m(P),n("div",{id:"touismPage",class:c(["page_container",{hasHeader:!e.navToggle,fullPage:e.fullPage}])},[n("h4",q,[n("button",{onClick:t[0]||(t[0]=(...i)=>e.goBack&&e.goBack(...i))},[n("img",{src:e.ArrowLeft,alt:"\u56DE\u4E0A\u4E00\u9801"},null,8,J)]),n("span",null,u(e.currentCity?e.cityTitle:e.apiTypeTitle),1)]),n("div",K,[e.apiLoad?(r(),s("div",M,[n("img",{src:e.Loading,alt:"Loading..."},null,8,Q)])):o("",!0),!e.apiLoad&&e.mainData.length>0?(r(),s("div",R,[(r(!0),s(F,null,w(e.processData,(i,k)=>(r(),N(C,{key:k,cardItem:i,currentType:e.currentType},null,8,["cardItem","currentType"]))),128)),n("div",U,[e.currentPage>1?(r(),s("button",{key:0,onClick:t[1]||(t[1]=i=>e.changePage(1)),class:c({active:e.currentPage===1})},"1",2)):o("",!0),e.currentPage>3?(r(),s("span",W,"...")):o("",!0),e.currentPage>2?(r(),s("button",{key:2,onClick:t[2]||(t[2]=i=>e.changePage(e.currentPage-1))},u(e.currentPage-1),1)):o("",!0),e.currentPage!==e.pageCount?(r(),s("button",{key:3,class:c({active:e.currentPage>1&&e.currentPage<e.pageCount}),onClick:t[3]||(t[3]=i=>e.changePage(e.currentPage))},u(e.currentPage),3)):o("",!0),e.currentPage+1<e.pageCount?(r(),s("button",{key:4,onClick:t[4]||(t[4]=i=>e.changePage(e.currentPage+1))},u(e.currentPage+1),1)):o("",!0),e.currentPage<e.pageCount-2?(r(),s("span",X,"...")):o("",!0),n("button",{onClick:t[5]||(t[5]=i=>e.changePage(e.pageCount)),class:c({active:e.currentPage===e.pageCount})},u(e.pageCount),3)])])):(r(),s("div",Y,"Nodata"))])],2),m(f)],2)}var ie=A(E,[["render",Z]]);export{ie as default};
